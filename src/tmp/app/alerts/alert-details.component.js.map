{"version":3,"sources":["app/alerts/alert-details.component.ts"],"names":[],"mappings":"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","file":"app/alerts/alert-details.component.js","sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { AlertMarker } from '../management/interfaces';\nimport { AlertsService } from './alerts.service';\nimport {DialogService} from '../dialog.service';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport {Observable} from 'rxjs/Rx';\nimport {SysLogger} from '../utils/SysLogger';\nimport {DatePipe} from '@angular/common';\n\n@Component({\n    selector: 'as-alert-details',\n    templateUrl: 'app/alerts/alert-details.html',\n    styleUrls: ['input {width: 20em}'],\n    providers: [SysLogger],\n    directives: []\n})\nexport class AlertDetailsComponent implements OnInit, OnDestroy {\n    private editName: string;\n    private sub: any;\n    private formAlert: AlertMarker = {\n        id: 0,\n        name: 'Enchente',\n        alertImage: 'flood.svg',\n        severity: 2,\n        isActive: false,\n        startDate: '',\n        releaseDate: '',\n        lat: -21.975086,\n        lng: -47.901249,\n        label: 'N',\n        draggable: false,\n        icon: 'fa-tint',\n        routeLink: '/enchentes',\n        strAddress: ''\n    };\n\n    constructor( private service: AlertsService,\n                 private route: ActivatedRoute,\n                 private router: Router,\n                 private dialogService: DialogService) {\n        let datePipe = new DatePipe();\n        let datenow = datePipe.transform(new Date(), 'short');\n        SysLogger.log(datenow);\n        this.formAlert.startDate = datenow;\n    }\n\n\n    ngOnInit() {\n        this.sub = this.route\n            .params\n            .subscribe(params => {\n                let key = +params['key'];\n                let alert = this.service.getAlert(key);\n                if (alert) {\n                    this.editName = alert.name;\n                    this.formAlert = alert;\n                } else { // id not found\n                    this.gotoAlertlist();\n                }\n            });\n    }\n\n    ngOnDestroy() {\n        if (this.sub) {\n            this.sub.unsubscribe();\n        }\n    }\n\n    cancel() {\n        this.gotoAlertlist();\n    }\n\n    save() {\n        this.formAlert.name = this.editName;\n        this.gotoAlertlist();\n    }\n\n    canDeactivate(): Observable<boolean> | boolean {\n        // Allow synchronous navigation (`true`) if no alert or the alert is unchanged\n        if (!this.formAlert || this.formAlert.name === this.editName) {\n            return true;\n        }\n        // Otherwise ask the user with the dialog service and return its\n        // promise which resolves to true or false when the user decides\n        let p = this.dialogService.confirm('Descartar mudan√ßas?');\n        let o = Observable.fromPromise(p);\n        return o;\n    }\n\n    gotoAlertlist() {\n        let alertKey = this.formAlert ? this.formAlert.id : null;\n        // Pass along the alert id if available\n        // so that the Alert list component can select that alert.\n        // Add a totally useless `foo` parameter for kicks.\n        // Absolute link\n        this.router.navigate(['/alertas', {key: alertKey}]);\n    }\n\n}\n"],"sourceRoot":"/source/"}